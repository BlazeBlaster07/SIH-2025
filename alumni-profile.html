<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alumni Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="alumni-profile.css" />
  <style>
    .edit-btn {
      background: #007bff;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 10px;
    }
    .save-btn {
      background: #28a745;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      display: none;
      margin-top: 10px;
    }
    /* Friend Cards Hover Effect */
    .friend-card {
      background: #f3f3f3;
      padding: 10px;
      margin: 5px;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .friend-card:hover {
      transform: scale(1.05);
      background: #e6e6e6;
    }

    /* Modal Styling */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 300px;
      text-align: center;
    }
    .close-modal {
      background: red;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 5px 10px;
      cursor: pointer;
      margin-top: 10px;
    }
    .connect-btn {
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 8px 12px;
      cursor: pointer;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <a href="alumni.html" class="back-link">‚Üê Back to Dashboard</a>
    <a href="#" class="logout-btn">Logout</a>
  </div>

  <main class="profile-container">
    <header class="profile-header">
      <img src="https://i.pravatar.cc/150?img=12" alt="Profile Photo" class="profile-photo" />
      <h1 id="alumniName">Rahul Sharma</h1>
      <p class="profile-role" id="alumniRole">Software Engineer | Batch 2018</p>
      <button class="edit-btn" id="editProfileBtn">‚úè Edit Profile</button>
    </header>

    <section class="profile-section">
      <h2>Academic Information</h2>
      <form id="academicForm">
        <label>Name:</label>
        <input type="text" id="name" value="Rahul Sharma" readonly />

        <label>Email:</label>
        <input type="email" id="email" value="rahul@example.com" readonly />

        <label>Phone:</label>
        <input type="tel" id="phone" value="+91-9876543210" readonly />

        <label>Batch:</label>
        <input type="text" id="batch" value="2018" readonly />

        <label>Branch:</label>
        <input type="text" id="branch" value="Computer Science" readonly />
      </form>
    </section>

    <section class="profile-section">
      <h2>Job Profile</h2>
      <form id="jobForm">
        <label>Current Company:</label>
        <input type="text" id="company" value="Tech Solutions Pvt Ltd" readonly />

        <label>Position:</label>
        <input type="text" id="position" value="Software Engineer" readonly />

        <label>Experience:</label>
        <input type="text" id="experience" value="3 Years" readonly />

        <label>Location:</label>
        <input type="text" id="location" value="Mumbai" readonly />
      </form>
      <button class="save-btn" id="saveProfileBtn">üíæ Save Changes</button>
    </section>

    <section class="friends-bar">
      <h2>Recommended Friends</h2>
      <div class="friends-list">
        <div class="friend-card" data-name="Anita Singh" data-batch="2017">Anita Singh<br /><small>Batch 2017</small></div>
        <div class="friend-card" data-name="Vikram Patel" data-batch="2018">Vikram Patel<br /><small>Batch 2018</small></div>
        <div class="friend-card" data-name="Sana Khan" data-batch="2016">Sana Khan<br /><small>Batch 2016</small></div>
        <div class="friend-card" data-name="Rohit Verma" data-batch="2019">Rohit Verma<br /><small>Batch 2019</small></div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal" id="friendModal">
    <div class="modal-content">
      <h3 id="modalName"></h3>
      <p id="modalBatch"></p>
      <button class="connect-btn" id="connectBtn">Connect</button>
      <button class="close-modal" id="closeModal">Close</button>
    </div>
  </div>

  <script>
    // Load logged-in user data
    let user = JSON.parse(localStorage.getItem("loggedInUser"));
    if (!user || user.role !== "alumni") {
      window.location.href = "index.html";
    } else {
      populateProfile(user);
    }

    function populateProfile(userData) {
      document.getElementById("alumniName").textContent = userData.username || "Unknown";
      document.getElementById("name").value = userData.username || "";
      document.getElementById("email").value = userData.email || "";
      document.getElementById("phone").value = userData.phone || "";
      document.getElementById("batch").value = userData.batch || "";
      document.getElementById("branch").value = userData.branch || "";
      document.getElementById("company").value = userData.company || "";
      document.getElementById("position").value = userData.position || "";
      document.getElementById("experience").value = userData.experience || "";
      document.getElementById("location").value = userData.location || "";
    }

    // Enable editing
    document.getElementById("editProfileBtn").addEventListener("click", () => {
      document.querySelectorAll("input").forEach((input) => (input.readOnly = false));
      document.getElementById("saveProfileBtn").style.display = "inline-block";
    });

    // Save profile changes
    document.getElementById("saveProfileBtn").addEventListener("click", () => {
      const updatedUser = {
        ...user,
        username: document.getElementById("name").value,
        email: document.getElementById("email").value,
        phone: document.getElementById("phone").value,
        batch: document.getElementById("batch").value,
        branch: document.getElementById("branch").value,
        company: document.getElementById("company").value,
        position: document.getElementById("position").value,
        experience: document.getElementById("experience").value,
        location: document.getElementById("location").value,
      };

      localStorage.setItem("loggedInUser", JSON.stringify(updatedUser));
      alert("Profile updated successfully!");
      document.querySelectorAll("input").forEach((input) => (input.readOnly = true));
      document.getElementById("saveProfileBtn").style.display = "none";
    });

    // Friend modal logic
    const modal = document.getElementById("friendModal");
    const modalName = document.getElementById("modalName");
    const modalBatch = document.getElementById("modalBatch");
    const connectBtn = document.getElementById("connectBtn");

    document.querySelectorAll(".friend-card").forEach(card => {
      card.addEventListener("click", () => {
        modal.style.display = "flex";
        modalName.textContent = card.dataset.name;
        modalBatch.textContent = `Batch: ${card.dataset.batch}`;
        connectBtn.dataset.friend = card.dataset.name;
      });
    });

    document.getElementById("closeModal").addEventListener("click", () => {
      modal.style.display = "none";
    });

    connectBtn.addEventListener("click", () => {
      let requests = JSON.parse(localStorage.getItem("connectRequests")) || [];
      if (!requests.includes(connectBtn.dataset.friend)) {
        requests.push(connectBtn.dataset.friend);
        localStorage.setItem("connectRequests", JSON.stringify(requests));
        alert(`Connection request sent to ${connectBtn.dataset.friend}`);
      } else {
        alert("You already sent a request to this person!");
      }
      modal.style.display = "none";
    });

    // Logout functionality
    document.querySelector(".logout-btn").addEventListener("click", (e) => {
      e.preventDefault();
      localStorage.removeItem("loggedInUser");
      window.location.href = "index.html";
    });
  </script>
</body>
</html>
